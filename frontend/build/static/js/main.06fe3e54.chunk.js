(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e){e.exports={AWSAccessKeyId:"AKIAIO6OMTSPS3MNPZMQ",AWSSecretKey:"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"}},115:function(e,t,a){},123:function(e,t,a){e.exports=a.p+"static/media/navbarLogo.98c57d4f.png"},126:function(e,t,a){e.exports=a(293)},131:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){},293:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(87),s=a.n(c),i=(a(131),a(5)),o=a(6),l=a(10),u=a(9),m=a(11),p=a(35),d=a(116),h=function(){return r.a.createElement("div",{id:"content"},r.a.createElement(d.a,{url:"https://rinattr.github.io/envizoDemo/",width:"740px",height:"640px",id:"myId",className:"iframe-visual",display:"initial",position:"relative",allowFullScreen:!0}))},g=a(2),f=(a(179),a(180),a(21)),b=(a(181),["http://www.stickpng.com/assets/images/5c434bffe39d5d01c21da941.png","https://www.freepnglogos.com/uploads/tupperware-png-logo/tupperware-png-logo-symbol-29.png","https://static1.squarespace.com/static/5aa5dcd84eddec7350a4c420/5aa83b4ee4966b2fc584cb7e/5aa83bd3e2c4839970f7f5b6/1520974805200/metal-can-beans-z-500.png","https://purepng.com/public/uploads/large/purepng.com-glass-bottlebottle-food-glass-object-941524620381f6zci.png"]),E=["http://www.stickpng.com/assets/images/5895ff0acba9841eabab60b0.png","http://www.stickpng.com/assets/images/5895ff01cba9841eabab60af.png"],v=["http://www.stickpng.com/assets/images/580b585b2edbce24c47b2780.png","https://b.kisscc0.com/20180813/hbe/kisscc0-fizzy-drinks-coca-cola-drink-can-computer-icons-soda-refrigerante-5b7195177b0c06.282002171534170391504.png"],y=function(e,t,a,n){for(var c=0;c<t;c++){var s=Math.floor(Math.random()*e.length);a.push(r.a.createElement("img",{id:n,key:c,src:e[s],alt:"garbage"}))}},N=function(e){var t=Math.floor(e.result),a=[];if("Recycle"===e.type)y(b,t,a,"recyclePics");else if("Reusable Grocery Bag"===e.type)y(E,t,a,"plasticBagsPics");else{if("Drink Tap Water"!==e.type)return null;y(v,t,a,"waterBottlePics")}return r.a.createElement("div",{className:"VisualWrapper"},r.a.createElement("img",{id:"people",src:"https://static1.squarespace.com/static/55947ac3e4b0fa882882cd65/58ab7b04bebafb337899961d/58ab7b16725e25c4fac43d33/1487647075724/NS_0010.png",alt:"people"}),r.a.createElement("div",{id:"garbageList"},a.reverse()))},_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setStory=function(e){var t;return(t={},Object(f.a)(t,"Reusable Grocery Bag",["I shop for groceries","times per week, and use","plastic bags on average each time.","plastic bags"]),Object(f.a)(t,"Drink Tap Water",["I drink a bottled or canned beverage","times per week.","","bottles and/or cans"]),Object(f.a)(t,"Recycle",["I dispose about","paper, metal, plastic and glass items per week, and recycle about","precentage of it.","paper, metal, plastic and glass items"]),t)[e]},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault();var t=a.state,n=t.input_a,r=t.input_b,c=t.frequency,s=t.currentGoal,i=parseInt(n),o=r?parseInt(r):1,l="month"===c?4.345:52.142,u="Recycle"===s?(i-i*o/100)*l.toFixed(1):(i*o*l).toFixed(1);isNaN(u)?a.setState({isSubmitted:!0,isInvalid:"*Please submit a valid number",calcResult:""}):a.setState({calcResult:u,isSubmitted:!0,isInvalid:""})},a.handleSelect=function(e){a.setState({frequency:e.target.value},a.handleSubmit)},a.state={currentGoal:"",currentStory:"",input_a:"",input_b:"",calcResult:"",frequency:"month",isSubmitted:!1,isInvalid:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.currentGoal;this.setState({currentGoal:e,currentStory:this.setStory(e)})}},{key:"render",value:function(){var e=this.state,t=e.input_a,a=e.input_b,n=e.calcResult,c=e.frequency,s=e.currentGoal,i=e.currentStory,o=e.isSubmitted,l=e.isInvalid;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.Modal,{header:s,trigger:r.a.createElement(g.Button,{small:!0},"Prediction")},r.a.createElement("form",{className:"input-field col s6 FormContainer"},i[0],r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("input",{placeholder:"input number",type:"text",name:"input_a",value:t,onChange:this.handleChange})),i[1],i[2]?r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("input",{placeholder:"input number",type:"text",name:"input_b",value:a,onChange:this.handleChange})):null,i[2],o?r.a.createElement("p",{style:{color:"red"}},l):null,r.a.createElement("p",null,r.a.createElement("button",{className:"btn-small",onClick:this.handleSubmit},"SHOW MY IMPACT")),o&&!l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(g.Select,{onChange:this.handleSelect},r.a.createElement("option",{value:"month"},"month"),r.a.createElement("option",{value:"year"},"year"))),"You are polluting your community with ",r.a.createElement("b",null,n)," ",i[3]," on average each ",c,".",r.a.createElement(N,{result:n,type:s})):null)))}}]),t}(n.Component),w=function(e){var t=e.count;return r.a.createElement("div",{className:"sub-count"},r.a.createElement("span",null,t),r.a.createElement("span",{className:"text-count"},"Subscribers"))},C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.props.isLoggedIn?a.props.history.push("/goal/".concat(e.target.id)):a.props.history.push("/login")},a.calcSubscribers=function(e){if(a.props.subscriptions){var t=a.props.subscriptions.subscriptions,n=0;return t.forEach(function(t){return t.goal_id===e&&n++}),n}return 0},a.scroll=function(e){e.preventDefault(),window.scroll(0,document.body.scrollHeight),setTimeout(function(){return window.scroll({top:2500,left:0,behavior:"smooth"})},300)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAllGoals(),this.props.fetchAllSubscriptions()}},{key:"render",value:function(){var e=this,t=this.props,a=t.boroughId,n=(t.subjects,this.props.goals?this.props.goals.data.filter(function(e){return e.community_id===+a}).map(function(t){return r.a.createElement(g.CollapsibleItem,{onClick:e.scroll,node:"h5",header:t.title+" - "+t.description.slogan,icon:"delete",key:t.id},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"flow-text"},t.description.initiative),r.a.createElement("h4",null,"Task:"),r.a.createElement("h5",null,t.description.description)),r.a.createElement("div",{className:"container leButtons"},r.a.createElement(_,{currentGoal:t.title}),r.a.createElement("button",{className:"btn-small subscribe",id:t.id,onClick:e.handleClick},"Learn More"),r.a.createElement(w,{count:e.calcSubscribers(t.id)})))}):r.a.createElement("div",{className:"container center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.Collapsible,{className:"container collap",onClick:this.handleScroll},n))}}]),t}(n.Component),S=Object(p.f)(C),k=a(13),I=a(7),A=a.n(I),O=function(e){return A.a.get("/api/goals/community/".concat(e))},j=function(e,t){return A.a.post("/api/submissions/user/".concat(e),t)},U=function(e,t){return A.a.get("/api/subscriptions/".concat(e,"/").concat(t))},R=function(e){return A.a.post("/api/subscriptions/new",e)},L=function(e){return A.a.delete("/api/subscriptions/".concat(e))},P=function(){return function(e){return A.a.get("/api/goals").then(function(t){return e({type:"RECEIVE_ALLGOALS",goals:t.data})}).catch(function(e){return console.log(e)})}},x=function(e){return function(t){return O(e).then(function(e){return t({type:"RECEIVE_ALLGOALS_PER_COMM",goalsComm:e.data})}).catch(function(e){return console.log(e)})}},M=function(e){return function(t){return(a=e,A.a.get("/api/submissions/goal/".concat(a))).then(function(e){return t({type:"RECEIVE_SUBMISSIONS_PER_GOAL",submissions:e.data.submissions})}).catch(function(e){return console.log(e)});var a}},D=function(e){return function(t){return(a=e,A.a.get("/api/subscriptions/goal/".concat(a))).then(function(e){return t({type:"RECEIVE_SUBSCRIPTIONS_PER_GOAL",subscriptions:e.data.subscriptions})}).catch(function(e){return console.log(e)});var a}},T=function(){return function(e){return A.a.get("/api/subscriptions/").then(function(t){return e({type:"RECEIVE_ALLSUBSCRIPTIONS",subscriptions:t.data})}).catch(function(e){return console.log(e)})}},G=function(e){return function(t){return function(e){return A.a.get("/api/subscriptions/user/".concat(e))}(e).then(function(e){return t({type:"RECEIVE_ALLSUBSCRIPTIONS_FORAUSER",subscriptions:e.data})}).catch(function(e){return console.log(e)})}},F=Object(k.b)(function(e,t){return{isLoggedIn:e.auth.isLoggedIn,goals:e.goals.goals,subscriptions:e.subscriptions.subscriptions}},function(e,t){return{fetchAllGoals:function(){return e(P())},fetchAllSubscriptions:function(){return e(T())}}})(S),B=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState({borough:t.target.value}),window.scroll(0,document.body.scrollHeight)},e.tabChange=function(t){e.setState({subjects:t})},e.state={borough:0,subjects:"00"},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.borough!==this.state.borough&&window.scroll(0,document.body.scrollHeight)}},{key:"componentDidMount",value:function(){this.props.fetchTonnage()}},{key:"render",value:function(){var e;return"00"===this.state.subjects&&(e=r.a.createElement(F,{boroughId:this.state.borough})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col s6"},r.a.createElement(g.Tabs,{onChange:this.tabChange,className:" tab-demo z-depth-1",options:{swipeable:!0}},r.a.createElement(g.Tab,{title:"Monthly Tonnage",active:!0},r.a.createElement("div",{className:"container"},r.a.createElement("h4",{id:"bold"},"Take a dive in NYC's trash pile.")),r.a.createElement("div",{id:"demo"},r.a.createElement(h,null),r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"* Each circle represents Monthly Tonnage for each borough between 2018-2019, according to NYC Open Data API.")),r.a.createElement("h4",{className:"center",id:"bold"},"OK. How Can I Help?"))),r.a.createElement(g.Tab,{title:"Air Pollution"},r.a.createElement("div",{className:"container"},r.a.createElement("h5",null,"Coming soon ..."))),r.a.createElement(g.Tab,{title:"Energy Consumption"},r.a.createElement("div",{className:"container"},r.a.createElement("h5",null,"Coming soon ..."))))),r.a.createElement("div",{className:"container borough-select"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(g.Select,{name:"borough",onChange:this.handleChange},r.a.createElement("option",{value:"0"},"Select Borough"),r.a.createElement("option",{value:"1"},"Manhattan"),r.a.createElement("option",{value:"2"},"Queens"),r.a.createElement("option",{value:"3"},"Bronx"),r.a.createElement("option",{value:"4"},"Brooklyn"),r.a.createElement("option",{value:"5"},"Staten Island")))),e)}}]),t}(n.Component),z=function(){return function(e){return A.a.get("https://data.cityofnewyork.us/resource/ebb7-mvp5.json?$limit=5000").then(function(t){return e({type:"RECEIVE_TONNAGE",tonnage:function(e){var t=e.filter(function(e){return e.month.includes("2018")||e.month.includes("2019")}),a={bronx:[],queens:[],manhattan:[],brooklyn:[],staten_island:[]};t.forEach(function(e){switch(e.borough){case"Bronx":a.bronx.push(e);break;case"Manhattan":a.manhattan.push(e);break;case"Queens":a.queens.push(e);break;case"Brooklyn":a.brooklyn.push(e);break;case"Staten Island":a.staten_island.push(e);break;default:return null}});var n={bronx:{},queens:{},manhattan:{},brooklyn:{},staten_island:{}},r=function(e){for(var t in a[e].forEach(function(t){n[e][t.month]?n[e][t.month].push(t):n[e][t.month]=[t]}),n[e])n[e][t]=n[e][t].length>1?n[e][t].reduce(function(e,t){return e+parseInt(t.refusetonscollected)},0):parseInt(n[e][t][0].refusetonscollected)};for(var c in a)r(c);return[n]}(t.data)})}).catch(function(e){console.log(e)})}},V=Object(k.b)(function(e,t){return{tonnage:e.data.tonnage}},function(e,t){return{fetchTonnage:function(){return e(z())}}})(B),W=(a(207),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).clickJon=function(t){e.jonDiv.current&&e.jonDiv.current.scrollIntoView({behavior:"smooth",block:"nearest"})},e.clickRinat=function(t){e.rinatDiv.current&&e.rinatDiv.current.scrollIntoView({behavior:"smooth",block:"nearest"})},e.clickMichell=function(t){e.michellDiv.current&&e.michellDiv.current.scrollIntoView({behavior:"smooth",block:"nearest"})},e.clickLeo=function(t){e.leoDiv.current&&e.leoDiv.current.scrollIntoView({behavior:"smooth",block:"nearest"})},e.clickTop=function(t){e.topDiv.current&&e.topDiv.current.scrollIntoView({behavior:"smooth",block:"nearest"})},e.state={},e.jonDiv=r.a.createRef(),e.rinatDiv=r.a.createRef(),e.michellDiv=r.a.createRef(),e.leoDiv=r.a.createRef(),e.topDiv=r.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container about"},r.a.createElement("h2",null,"Our Mission"),r.a.createElement("p",{className:"flow-text"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."),r.a.createElement("h2",null,"About Us"),r.a.createElement("p",{className:"flow-text"}," Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),r.a.createElement("h2",{ref:this.topDiv},"Meet The Envizo Team"),r.a.createElement("div",{className:"us"},r.a.createElement("div",{className:"us-buttons hide-on-med-and-up"},r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:this.clickJon},"Jon"),r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:this.clickRinat},"Rinat"),r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:this.clickMichell},"Michell"),r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:this.clickLeo},"Leo")),r.a.createElement("div",{ref:this.LeoDiv,className:"me s6 m6 l6"},r.a.createElement("img",{className:"ipic circle responsive-img",alt:"someone awesome",src:"https://media.licdn.com/dms/image/C5603AQHOAyGVTY4jFw/profile-displayphoto-shrink_800_800/0?e=1561593600&v=beta&t=wbjMusyW99PlvWoCke87xNkR1BuUvFFjhdBKgx1QnKQ"}),r.a.createElement("h5",null,"Leo Lu"),r.a.createElement("p",{className:"desc"},"Something about yourself here"),r.a.createElement("div",{className:"contact"},r.a.createElement("a",{href:"https://github.com/Godsby"},r.a.createElement("img",{alt:"github",src:"https://img.icons8.com/ios/50/000000/github-filled.png"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/followingdreams/"},r.a.createElement("img",{alt:"linkedin",src:"https://img.icons8.com/ios/50/000000/linkedin-filled.png"})))),r.a.createElement("div",{ref:this.michellDiv,className:"me s6 m6 l6"},r.a.createElement("img",{className:"ipic circle responsive-img",alt:"someone awesome",src:"https://media.licdn.com/dms/image/C4D03AQHNCQX_yyHPLQ/profile-displayphoto-shrink_800_800/0?e=1561593600&v=beta&t=cu32UAtRtaeO7ifc5aW3O0VPUDFZ2pP0YJ19O7YDYdg"}),r.a.createElement("h5",null,"Michell Tejada"),r.a.createElement("p",{className:"desc"},"Something about yourself here"),r.a.createElement("div",{className:"contact"},r.a.createElement("a",{href:"https://github.com/mitejada"},r.a.createElement("img",{alt:"github",src:"https://img.icons8.com/ios/50/000000/github-filled.png"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/michell-tejada-8a78b5174/"},r.a.createElement("img",{alt:"linkedin",src:"https://img.icons8.com/ios/50/000000/linkedin-filled.png"})))),r.a.createElement("div",{ref:this.rinatDiv,className:"me s6 m6 l6"},r.a.createElement("img",{className:"ipic circle responsive-img",alt:"someone awesome",src:"https://media.licdn.com/dms/image/C4E03AQElsAzXkY2U8A/profile-displayphoto-shrink_800_800/0?e=1561593600&v=beta&t=HhzLXqcBI5k_1Dh8WFiGlTMxcXeSGMhtrwcAjwHY8-4"}),r.a.createElement("h5",null,"Rinat Tregerman"),r.a.createElement("p",{className:"desc"},"Something about yourself here"),r.a.createElement("div",{className:"contact"},r.a.createElement("a",{href:"https://github.com/RinatTr"},r.a.createElement("img",{alt:"github",src:"https://img.icons8.com/ios/50/000000/github-filled.png"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/rinat-tregerman/"},r.a.createElement("img",{alt:"linkedin",src:"https://img.icons8.com/ios/50/000000/linkedin-filled.png"})))),r.a.createElement("div",{ref:this.jonDiv,className:"me s6 m6 l6"},r.a.createElement("img",{className:"circle responsive-img",alt:"someone awesome",src:"https://scontent-lga3-1.xx.fbcdn.net/v/t1.0-0/c0.92.370.370a/p370x247/56927150_2215805478511880_8949892781715750912_n.jpg?_nc_cat=109&_nc_ht=scontent-lga3-1.xx&oh=3da8e13beb787f5156d72baf1f10cdc4&oe=5D6755CD"}),r.a.createElement("h5",null,"Jonathan Andrade"),r.a.createElement("p",{className:"desc"},"Something about yourself here"),r.a.createElement("div",{className:"contact"},r.a.createElement("a",{href:"https://github.com/xpectro93"},r.a.createElement("img",{alt:"github",src:"https://img.icons8.com/ios/50/000000/github-filled.png"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/jonathan-andrade-571201175/"},r.a.createElement("img",{alt:"linkedin",src:"https://img.icons8.com/ios/50/000000/linkedin-filled.png"}))),r.a.createElement("button",{className:"btn waves-effect waves-light hide-on-med-and-up",onClick:this.clickTop},"Top"))))}}]),t}(n.Component)),Y=(a(208),a(45)),q=a.n(Y),H=a(102),K={bucketName:"envizo-img",region:"us-east-1",accessKeyId:H.AWSAccessKeyId,secretAccessKey:H.AWSSecretKey},Q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",username:"",password:"",passwordConfirm:"",borough:1,avatar_img:null,error:!1,didUpload:!1},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSelect=function(e){a.setState({borough:e.target.value})},a.upload=function(e){q.a.uploadFile(e.target.files[0],K).then(function(e){a.setState({avatar_img:e.location,didUpload:!0})}).catch(function(e){return console.log(e)})},a.onSubmitNewUser=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password,email:a.state.email,community_id:+a.state.borough,avatar_img:a.state.avatar_img};a.state.password===a.state.passwordConfirm?(a.props.newUser(t),a.setState({username:"",password:"",passwordConfirm:"",borough:1,email:"",avatar_img:"",error:!1})):a.setState({error:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuthenticateStatus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container SignUpContainer"},r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"Sign Up")),r.a.createElement("form",{className:"input-field col s6 FormContainer",onSubmit:this.onSubmitNewUser},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("label",{htmlFor:"signup_email"},"Email"),r.a.createElement("input",{type:"text",className:"validate",id:"'signup_email'",name:"email",value:this.state.emailInput,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"signup_username",name:"username",value:this.state.usernameInput,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(g.Select,{name:"borough",onChange:this.handleSelect},r.a.createElement("option",{value:"0"},"Select Borough"),r.a.createElement("option",{value:"1"},"Manhattan"),r.a.createElement("option",{value:"2"},"Queens"),r.a.createElement("option",{value:"3"},"Bronx"),r.a.createElement("option",{value:"4"},"Brooklyn"),r.a.createElement("option",{value:"5"},"Staten Island"))),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"signup_password",name:"password",value:this.state.passwordInput,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("label",{htmlFor:"passwordConfirm"},"Confirm Password"),r.a.createElement("input",{type:"password",className:"confirm_password",name:"passwordConfirm",value:this.state.passwordConfirm,onChange:this.handleChange})),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn-small waves-effect waves-light"},r.a.createElement("span",null,"Upload"),r.a.createElement("input",{type:"file",name:"avatar",accept:".jpg, .jpeg, .png",onChange:this.upload})),this.state.didUpload?"Photo Uploaded!":"Choose Photo and Wait to Load ...",r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",name:"avatarpath",type:"text"}))),r.a.createElement("button",{className:"btn-small waves-effect waves-light",type:"submit",name:"action"},"Sign Up",r.a.createElement("i",{className:"material-icons right"},"send"))),this.props.isLoggedIn?r.a.createElement(p.a,{to:"/profile/".concat(this.props.auth.userId)}):null,this.state.error?r.a.createElement("p",null,"Check Input Entries"):null,r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"Already a member? ",r.a.createElement("a",{href:"/login"},"Login"))))}}]),t}(n.Component),J={authenticateUser:function(e){localStorage.setItem("token",e)},isUserAuthenticated:function(){return null!==localStorage.getItem("token")},deauthenticateUser:function(){localStorage.removeItem("token")},getToken:function(){return localStorage.getItem("token")}},X=function(){return function(e){A.a.post("/api/sessions/logout").then(function(){J.deauthenticateUser()}).then(function(){$()})}},$=function(){return function(e){A.a.get("/api/sessions/isLoggedIn").then(function(t){t.data.id===+J.getToken()?(e({type:"LOG_IN",payload:t.data}),e(Z())):t.data.id?X():J.deauthenticateUser()})}},Z=function(){return function(e){A.a.get("/api/users/".concat(+J.getToken())).then(function(t){e({type:"CURRENT_USER",payload:t.data.user})}).catch(function(e){console.log(e)})}},ee=Object(p.f)(Object(k.b)(function(e,t){return{user:e.auth.currentUser,isLoggedIn:e.auth.isLoggedIn,auth:e.auth}},function(e,t){return{newUser:function(t){return e((a=t,function(e){A.a.post("/api/sessions/new",a).then(function(t){e({type:"NEW_USER",user:t}),A.a.post("/api/sessions/login",{username:a.username,password:a.password}).then(function(t){J.authenticateUser(t.data.id),e({type:"LOG_IN",payload:t.data.id})}).then(function(){$()})})}));var a},checkAuthenticateStatus:function(){return e($())},logout:function(){return e(X())},loadCurrent:function(){return e(Z())}}})(Q)),te=a(65),ae=a.n(te),ne=(a(239),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"dudette",password:"12345"},a.handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.onSubmitLogIn=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password};a.props.logIn(t)},a.logout=function(e){a.props.logout(),window.location.reload()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuthenticateStatus(),ae.a.updateTextFields()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container LogInContainer"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("h4",null,"Log In")),r.a.createElement("form",{onSubmit:this.onSubmitLogIn},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"signup_username",name:"username",value:this.state.usernameInput,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"signup_password",name:"password",value:this.state.passwordInput,onChange:this.handleChange})),this.props.isLoggedIn?r.a.createElement(p.a,{to:"/profile/".concat(this.props.auth.userId)}):r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Login",r.a.createElement("i",{className:"material-icons right"},"send")))),this.props.isLoggedIn?r.a.createElement("img",{src:"https://media1.tenor.com/images/8d9e656f141cb596b9196287197bea37/tenor.gif?itemid=11705959",alt:"logintest"}):r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"Not a member? ",r.a.createElement("a",{href:"/signup"},"Sign up"))))}}]),t}(n.Component)),re=Object(p.f)(Object(k.b)(function(e,t){return{user:e.auth.currentUser,isLoggedIn:e.auth.isLoggedIn,auth:e.auth}},function(e,t){return{checkAuthenticateStatus:function(){return e($())},logIn:function(t){return e(function(e){return function(t){A.a.post("/api/sessions/login",e).then(function(e){J.authenticateUser(e.data.id),t({type:"LOG_IN",payload:e.data})}).then(function(){$()}).catch(function(e){console.log(e)})}}(t))},logout:function(){return e(X())},loadCurrent:function(){return e(Z())}}})(ne)),ce=a(8),se=(a(240),a(296)),ie=a(297),oe=a(298),le=a(299),ue=a(300),me=a(301),pe=a(26),de=a.n(pe),he={1:"https://img3.goodfon.com/wallpaper/nbig/a/9b/new-york-city-new-york-1271.jpg",2:"https://pbs.twimg.com/media/Drb0hVBWwAUvJSr.jpg",3:"https://cdn-assets.alltrails.com/uploads/photo/image/19326941/extra_large_a08958fc25b15bb98cf4e1d17f1443c1.jpg",4:"http://s1.1zoom.net/big0/603/Australia_Rivers_Boats_Brooklyn_Hawkesbury_River_540885_1280x800.jpg",5:"https://cdn2.vox-cdn.com/uploads/chorus_asset/file/6695497/07_Kensinger_Mill_Creek_DSC_8839.0.jpg"},ge=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={community:[]},a.getCommunityForAUser=function(){A.a.get("/api/communities/user/".concat(a.props.match.params.id)).then(function(e){a.setState({community:e.data.community})}).catch(function(e){return Error})},a.getActivities=function(){var e=a.state.community,t=a.props,n=t.auth,c=t.users,s=t.userActivity,i=parseInt(a.props.match.params.id),o=c.find(function(e){return e.id===i}),l=o?n.currentUser.id===i?"You":o.username:null,u=o?n.currentUser.id===i?"have":"has":null;return s.length?s.map(function(t){return"joined"===t.type?r.a.createElement(g.CollectionItem,{className:"l2",key:t.activity_id},r.a.createElement("div",{className:"joined"},r.a.createElement("div",{className:"text"},r.a.createElement("p",{className:"left"},l," ",u," joined",r.a.createElement(ce.b,{to:e.length?"/community/".concat(e[0].id):"not available"}," ",e.length?e[0].name:"Loading")," community."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:t.time_stamp}))),r.a.createElement("div",{className:"share_buttons"},r.a.createElement(se.a,{url:"www.facebook.com",className:"button"},r.a.createElement(ie.a,{size:32,round:!0})),r.a.createElement(oe.a,{url:"www.twitter.com",className:"button"},r.a.createElement(le.a,{size:32,round:!0})),r.a.createElement(ue.a,{url:"www.tumblr.com",className:"button"},r.a.createElement(me.a,{size:32,round:!0}))))):"uploaded"===t.type?r.a.createElement(g.CollectionItem,{className:"l2",key:t.id},r.a.createElement("div",{className:"joined"},r.a.createElement("div",null,r.a.createElement("p",{className:"left"},l," ",u," uploaded a photo ",t.title,"."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:t.time_stamp}))),r.a.createElement("div",{className:"share_buttons"},r.a.createElement(se.a,{url:"www.facebook.com",className:"button"},r.a.createElement(ie.a,{size:32,round:!0})),r.a.createElement(oe.a,{url:"/",className:"button"},r.a.createElement(le.a,{size:32,round:!0})),r.a.createElement(ue.a,{url:"www.tumblr.com",className:"button"},r.a.createElement(me.a,{size:32,round:!0}))))):"subscribed"===t.type?r.a.createElement(g.CollectionItem,{className:"l2",key:t.activity_id},r.a.createElement("div",{className:"joined",key:t.id},r.a.createElement("div",null,r.a.createElement("p",{className:"left"},l," ",u," subscribed to ",r.a.createElement("a",{href:"/goal/".concat(t.goal_id),className:"communityActivity_link"},t.title),"."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:t.time_stamp}))),r.a.createElement("div",{className:"share_buttons"},r.a.createElement(se.a,{url:"www.facebook.com",className:"button"},r.a.createElement(ie.a,{size:32,round:!0})),r.a.createElement(oe.a,{url:"www.twitter.com",className:"button"},r.a.createElement(le.a,{size:32,round:!0})),r.a.createElement(ue.a,{url:"www.tumblr.com",className:"button"},r.a.createElement(me.a,{size:32,round:!0}))))):r.a.createElement(g.CollectionItem,{className:"l2",key:t.id},r.a.createElement("div",{className:"joined"},r.a.createElement("div",null,r.a.createElement(ce.b,{to:e.length?"/community/".concat(e[0].id):null},e.length?e[0].name:"Loading")," ",u," reached a milestone.",r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:t.time_stamp}))),r.a.createElement("div",{className:"share_buttons"},r.a.createElement(se.a,{url:"www.facebook.com",className:"button"},r.a.createElement(ie.a,{size:32,round:!0})),r.a.createElement(oe.a,{url:"www.twitter.com",className:"button"},r.a.createElement(le.a,{size:32,round:!0})),r.a.createElement(ue.a,{url:"www.tumblr.com",className:"button"},r.a.createElement(me.a,{size:32,round:!0})))))}):r.a.createElement(g.CollectionItem,{className:"l2"},r.a.createElement("p",null,"No Activities yet..."))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAllGoals(),this.props.fetchAllUsers(),this.props.checkAuthenticateStatus(),this.getCommunityForAUser(),this.props.fetchAllSubscriptionsForAUser(this.props.match.params.id),this.props.fetchUserActivity(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&(this.props.fetchAllGoals(),this.props.fetchAllUsers(),this.props.checkAuthenticateStatus(),this.getCommunityForAUser(),this.props.fetchAllSubscriptionsForAUser(this.props.match.params.id),this.props.fetchUserActivity(this.props.match.params.id))}},{key:"render",value:function(){var e=this,t=this.state.community,a=t.length?t[0].id:null,n=this.props,c=n.users,s=n.match,i=n.subscriptions,o=parseInt(s.params.id),l=c.find(function(e){return e.id===o}),u=l?l.username:"",m=l?l.avatar_img:"",p=i.subscripUser.length?i.subscripUser.map(function(t){return r.a.createElement(g.CollectionItem,{key:t.goal_id,className:"community-goal",onClick:function(){return e.props.history.push("/goal/".concat(t.goal_id))}},t.title,r.a.createElement("a",{href:"/goal/".concat(t.goal_id),className:"secondary-content"},r.a.createElement(g.Icon,null,"arrow_forward")))}):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.CollectionItem,null,r.a.createElement("h6",null,"No subscriptions...please click to subscribe ;)")),r.a.createElement(g.CollectionItem,null,r.a.createElement(g.Button,{type:"submit",waves:"light"},r.a.createElement("a",{href:"/goals/community/".concat(a),className:"secondary-content"},r.a.createElement("div",{className:"white-text"},"Subscribe",r.a.createElement(g.Icon,{right:!0},"send"))))));return r.a.createElement("div",{className:"user_profile"},r.a.createElement(g.Row,{className:"center"},r.a.createElement(g.Col,{l:4,className:"white push-l1 m10 s12 black-text z-depth-3 no-pad"},r.a.createElement("div",{className:"pic-container"},r.a.createElement("img",{src:t[0]?he[t[0].id]:null,alt:"borough",className:"borough responsive-img"}),r.a.createElement("span",{className:"borough-title"},r.a.createElement(ce.b,{to:t.length?"/community/".concat(t[0].id):"not available"},t.length?r.a.createElement("h4",{className:"boroughName",id:"bold"},t[0].name):"Loading")),r.a.createElement("img",{src:m,alt:"",className:"circle profile-pic z-depth-3 center"})),r.a.createElement("div",null,r.a.createElement("h4",{className:"username"},u)),r.a.createElement("h5",null,"What Motivates You?"),r.a.createElement(g.Collection,{className:"no-pad"},p)),r.a.createElement(g.Col,{l:5,className:"offset-l2 m10 s12 black-text z-depth-3 no-pad"},r.a.createElement(g.Collection,{header:"Feed",className:"no-pad"},this.getActivities()))))}}]),t}(n.Component),fe=function(){return function(e){return A.a.get("/api/users").then(function(t){return e({type:"RECEIVE_ALLUSERS",users:t.data.users})}).catch(function(e){console.log(e)})}},be=function(e){return function(t){return function(e){return A.a.get("/api/users/activity/".concat(e))}(e).then(function(e){return t({type:"RECEIVE_USERACTIVITY",activity:e.data.data})}).catch(function(e){return console.log(Error)})}},Ee=Object(k.b)(function(e,t){return{auth:e.auth,goals:e.goals.goals,users:e.users,subscriptions:e.subscriptions,userActivity:e.userActivity}},function(e,t){return{fetchAllGoals:function(){return e(P())},checkAuthenticateStatus:function(){return e($())},fetchAllUsers:function(){return e(fe())},fetchAllSubscriptionsForAUser:function(t){return e(G(t))},fetchUserActivity:function(t){return e(be(t))}}})(ge),ve=(a(289),function(e){for(var t=e.submissions,a=[],n=0;n<500;n++)n<t.length?a.push(r.a.createElement("div",{className:"sub-img-wrapper"},r.a.createElement("img",{className:"user-sub-img",src:t[n].img_url,alt:"puzzle piece"}))):a.push(r.a.createElement("div",{className:"sub-img-wrapper",key:n}));return r.a.createElement("div",{className:"container-puzzle"},a.reverse())}),ye=(a(115),a(102)),Ne={bucketName:"envizo-img",region:"us-east-1",accessKeyId:ye.AWSAccessKeyId,secretAccessKey:ye.AWSSecretKey},_e=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loggedUserSubId:"",didUpload:!1,goalInfo:[]},a.handleSubscribe=function(e){var t=a.props,n=t.loggedUser,r=t.match,c=a.state.loggedUserSubId,s=n.id,i=r.params.goal_id;"SUB"===e.target.innerText.slice(0,3)?R({user_id:s,goal_id:i}).then(function(e){a.refreshSubscriptions(s,i)}):L(c).then(function(e){a.refreshSubscriptions(s,i)})},a.getGoal=function(){A.a.get("/api/goals/".concat(a.props.match.params.goal_id)).then(function(e){a.setState({goalInfo:[e.data.data]})})},a.nd=function(e){var t=e.split("@$");return{description:t[0],initiative:t[1],slogan:t[2]}},a.handleUpload=function(e){var t=a.props,n=t.loggedUser,r={img_url:"",goal_id:t.match.params.goal_id};q.a.uploadFile(e.target.files[0],Ne).then(function(e){r.img_url=e.location,a.setState({didUpload:!0}),j(n.id,r)}).then(function(){window.location.reload()}).catch(function(e){return console.log(e)})},a.refreshSubscriptions=function(e,t){U(e,t).then(function(e){a.props.fetchSubscriptionsPerGoal(t);var n=e.data.subId.length?e.data.subId[0].id:"";return a.setState({loggedUserSubId:n})})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loggedUser.id,t=this.props.match.params.goal_id;this.getGoal(),this.refreshSubscriptions(e,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.loggedUser;if(t.id!==e.loggedUser.id){var a=t.id,n=+this.props.match.params.goal_id;this.refreshSubscriptions(a,n)}}},{key:"render",value:function(){var e=this.state,t=e.loggedUserSubId,a=e.goalInfo,n=this.props,c=n.submissions,s=n.subscriptions,i=n.loggedUser,o=c&&a[0]?(c.length/+a[0].target_value*100).toFixed(2):0,l=c?c.filter(function(e){return e.user_id===i.id}).length:null,u=c&&a[0]?(l/+a[0].target_value*100).toFixed(2):0;return c&&a[0]?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"goal-header"},r.a.createElement("h4",{id:"bold"},a[0].title),r.a.createElement("div",{className:"subs"},r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:this.handleSubscribe}," ",t?"Unsubscribe ":"Subscribe ",s?s.length:null))),r.a.createElement("h4",null,this.nd(a[0].description).description),i.id&&t?r.a.createElement(g.Row,null,r.a.createElement(g.Col,{s:12},r.a.createElement("h4",null,"Your Contribution"),r.a.createElement("h5",null,l,"/",a[0].target_value," total pictures"),r.a.createElement(g.ProgressBar,{className:u>99?"finished":"not-finished",progress:+u}))):null,r.a.createElement(g.Row,null,r.a.createElement(g.Col,{s:12},r.a.createElement("h4",null,r.a.createElement("a",{id:"bold",href:"/community/".concat(a[0].community_id)},a[0].community)," Contributions"),r.a.createElement("h5",null,o,"%"),r.a.createElement(g.ProgressBar,{className:o>99?"finished":"not-finished",progress:+o})),r.a.createElement("div",{className:"container puzzle-area"},r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn-small waves-effect waves-light"},r.a.createElement("span",null,"Upload photo"),r.a.createElement("input",{type:"file",name:"avatar",accept:".jpg, .jpeg, .png",onChange:this.handleUpload})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",name:"avatarpath",type:"text"}))),r.a.createElement(ve,{submissions:c})))):""}}]),t}(n.Component),we=function(e){var t=e.title,a=e.usernames,n=e.goalId,c=e.percAll,s=e.handleSubscribe,i=e.isSubscribed,o=e.subscriptionCount,l=a?a.map(function(e,t){return r.a.createElement("li",{key:t},e)}).slice(0,5):"";return r.a.createElement("div",{className:"goal-display-container"},r.a.createElement("div",{className:"goal-header"},r.a.createElement("h4",null,r.a.createElement(ce.b,{to:"/goal/".concat(n)},t)),r.a.createElement("div",{className:"subs"},r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:s,id:i[1]?i[1].id+"'"+i[1].goal_id:"0'"+n}," ",i[0]?"Unsubscribe ":"Subscribe ",o||null))),r.a.createElement(g.Col,{s:12},r.a.createElement("h4",null,c,"%"),r.a.createElement(g.ProgressBar,{className:c>99?"finished":"not-finished",progress:c})),r.a.createElement("ul",null,r.a.createElement(ce.b,{to:"/goal/".concat(n)},l.length?"Recently joined members":"",l.length?l:"",l.length?" ...":"")))},Ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loggedUserSubId:""},a.handleSubscribe=function(e){var t=a.props,n=t.loggedUser,r=(t.match,a.state.loggedUserSubId,n.id),c=e.target.id,s=e.target.innerText.slice(0,3),i=c.split("'"),o=i[1];a.refreshSubscriptionsForUserAndGoal(r,o).then(function(){"SUB"===s?R({user_id:r,goal_id:o}).then(function(e){a.refreshSubscriptionsForUserAndGoal(r,o),a.refreshProps()}):L(i[0]).then(function(e){a.refreshSubscriptionsForUserAndGoal(r,o),a.refreshProps()})})},a.refreshSubscriptionsForUserAndGoal=function(e,t){return U(e,t).then(function(e){a.props.fetchSubscriptionsPerGoal(t);var n=e.data.subId.length?e.data.subId[0].id:"";return a.setState({loggedUserSubId:n})})},a.refreshProps=function(){var e=a.props.match;a.props.loggedUser.id&&a.props.fetchAllSubscriptionsForAUser(a.props.loggedUser.id),a.props.fetchAllSubscriptionsPerComm(e.params.community_id),a.props.fetchAllSubmissionCountPerComm(e.params.community_id),a.props.fetchAllGoalsPerCommunity(e.params.community_id)},a.calcProgress=function(e,t){return(e/t*100).toFixed(2)},a.getUserNames=function(e){var t=a.props.community,n=[];t.subscriptions_per_goal&&(void 0!==t.subscriptions_per_goal[e]&&t.subscriptions_per_goal[e].forEach(function(e){return n.push(e.username)}));return n},a.isSubscribed=function(e){var t=a.props,n=t.community,r=t.loggedUser,c=!1,s=null;return n.subscriptions_per_goal&&r.id&&void 0!==n.subscriptions_per_goal[e]&&(c=!!(s=n.subscriptions_per_goal[e].find(function(e){return e.user_id===r.id}))),[c,s]},a.submissionCount=function(e){var t=a.props.community,n=0;return t.submissions_count_per_goal&&void 0!==t.submissions_count_per_goal[e]&&(n=t.submissions_count_per_goal[e][0].submissions_count),n},a.subscriptionCount=function(e){var t=a.props.community,n=0;return t.subscriptions_per_goal&&void 0!==t.subscriptions_per_goal[e]&&(n=Object.keys(t.subscriptions_per_goal[e]).length),n},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.loggedUser.id!==e.loggedUser.id&&this.refreshProps()}},{key:"render",value:function(){var e=this,t=this.props.community,a=t.goals?t.goals.data.map(function(t){return r.a.createElement(we,{title:t.title,goalId:t.id,usernames:e.getUserNames(t.id),percAll:e.calcProgress(e.submissionCount(t.id),t.target_value),handleSubscribe:e.handleSubscribe,isSubscribed:e.isSubscribed(t.id),subscriptionCount:e.subscriptionCount(t.id)})}):"";return void 0!==t.goals?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"goal-header"},r.a.createElement("h4",{id:"bold"},"Goals for ",t.goals.data[0].community)),a||""):""}}]),t}(n.Component),Se=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshProps=function(e){var t=a.props,n=t.match,r=t.loggedUser;n.path!==e.match.path&&(a.props.fetchSubmissionsPerGoal(n.params.goal_id),a.props.fetchSubscriptionsPerGoal(n.params.goal_id),a.props.checkAuthenticateStatus(),r.id&&a.props.fetchAllSubscriptionsForAUser(r.id))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.loggedUser;this.props.checkAuthenticateStatus(),a.id&&this.props.fetchAllSubscriptionsForAUser(a.id),t.params.goal_id?(this.props.fetchSubmissionsPerGoal(t.params.goal_id),this.props.fetchSubscriptionsPerGoal(t.params.goal_id)):(this.props.fetchAllSubscriptionsPerComm(t.params.community_id),this.props.fetchAllSubmissionCountPerComm(t.params.community_id),this.props.fetchAllGoalsPerCommunity(t.params.community_id))}},{key:"componentDidUpdate",value:function(e){this.refreshProps(e)}},{key:"render",value:function(){var e=this.props.match;return r.a.createElement(r.a.Fragment,null,e.params.goal_id?r.a.createElement(_e,this.props):r.a.createElement(Ce,this.props))}}]),t}(n.Component),ke=Object(k.b)(function(e,t){return{loggedUser:e.auth.currentUser,submissions:e.goals.submissions,subscriptions:e.goals.subscriptions,subsPerUser:e.subscriptions.subscripUser,community:{subscriptions_per_goal:e.subscriptions.community,submissions_count_per_goal:e.goals.subCount,goals:e.goals.goalsComm}}},function(e,t){return{fetchAllSubmissionCountPerComm:function(t){return e(function(e){return function(t){O(e).then(function(e){var a=[];return e.data.data.forEach(function(e){var t=A()({url:"/api/submissions/count/".concat(e.id)});a.push(t)}),Promise.all(a).then(function(e){var a={};return e.forEach(function(e,t){e.data.count.length&&(a[e.data.count[0].goal_id]=e.data.count)}),t({type:"RECEIVE_ALLSUBM_COUNT_PER_COMM",subCount:a})})})}}(t))},fetchAllSubscriptionsPerComm:function(t){return e(function(e){return function(t){O(e).then(function(e){var a=[];return e.data.data.forEach(function(e){var t=A()({url:"/api/subscriptions/goal/".concat(e.id)});a.push(t)}),Promise.all(a).then(function(e){var a={};return e.forEach(function(e,t){void 0!==e.data.subscriptions[t]&&(a[e.data.subscriptions[t].goal_id]=e.data.subscriptions)}),t({type:"RECEIVE_ALLSUBS_PER_COMM",subscriptions:a})})})}}(t))},fetchAllGoalsPerCommunity:function(t){return e(x(t))},fetchAllSubscriptionsForAUser:function(t){return e(G(t))},fetchSubmissionsPerGoal:function(t){return e(M(t))},fetchSubscriptionsPerGoal:function(t){return e(D(t))},checkAuthenticateStatus:function(){return e($())}}})(Se),Ie=a(123),Ae=a.n(Ie),Oe=(a(290),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).logout=function(t){e.props.logout(),window.location="/"},e.state={},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuthenticateStatus(),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav");ae.a.Sidenav.init(e)})}},{key:"render",value:function(){var e=this.props.auth.isLoggedIn?r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("div",{className:"navbar_registration"},r.a.createElement("li",null,r.a.createElement(ce.b,{to:"/profile/".concat(this.props.auth.currentUser.id)},r.a.createElement("div",{className:"usernav-img-wrapper"},r.a.createElement("img",{src:this.props.auth.currentUser.avatar_img,className:"responsive-img circle",alt:"Contact Person"}),r.a.createElement("h5",{id:"beige"},this.props.auth.currentUser.username)))),r.a.createElement("li",null,r.a.createElement(ce.c,{to:"/community/".concat(this.props.auth.currentUser.community_id),className:"nav-commmunity"},r.a.createElement("h5",{id:"beige"},"My Community"))),r.a.createElement("li",null,r.a.createElement(ce.c,{exact:!0,to:"/",className:"logout",onClick:this.logout},r.a.createElement("h5",{id:"beige"},"Logout"))))):r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("div",{className:"navbar_registration"},r.a.createElement("li",null,r.a.createElement(ce.c,{to:"/signup",className:"signup"},r.a.createElement("h5",{id:"beige"},"Sign Up"))),r.a.createElement("li",null,r.a.createElement(ce.c,{to:"/login",className:"login"},r.a.createElement("h5",{id:"beige"},"Login"))),r.a.createElement("li",null,r.a.createElement(ce.c,{to:"/aboutus",className:"aboutus"},r.a.createElement("h5",{id:"beige"},"About Us")))));return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("div",{className:"logo_img"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:Ae.a,alt:"",className:"brand-logo responsive-img"}))),r.a.createElement("a",{href:"/","data-target":"mobile-demo",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),e)),this.props.auth.isLoggedIn?r.a.createElement("ul",{className:"sidenav",id:"mobile-demo"},r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{exact:!0,to:"/"},"Home")),r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{to:"/profile/".concat(this.props.auth.userId)},"My Profile")),r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{to:"/community/".concat(this.props.auth.currentUser.community_id),className:"nav-commmunity"},"My Community")),r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{to:"/aboutus"},"About Us")),r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{exact:!0,to:"/",onClick:this.logout},"Logout"))):r.a.createElement("ul",{className:"sidenav",id:"mobile-demo"},r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{to:"/signup"},"Sign Up")),r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{to:"/login"},"Login")),r.a.createElement("li",{className:"sidenav-close"},r.a.createElement(ce.c,{to:"/aboutus"},"About Us"))))}}]),t}(n.Component)),je=Object(k.b)(function(e,t){return{auth:e.auth,user:e.auth.currentUser}},function(e,t){return{logout:function(){return e(X())},loadCurrent:function(){return e(Z())},checkAuthenticateStatus:function(){return e($())}}})(Oe),Ue=function(e){return function(t){return function(e){return A.a.get("/api/communities/".concat(e,"/activity"))}(e).then(function(e){return t({type:"RECEIVE_ALLACTIVITY_FORACOMMUNITY",activity:e.data})}).catch(function(e){return console.log(Error)})}},Re=(a(291),{1:{imgUrl:"https://img3.goodfon.com/wallpaper/nbig/a/9b/new-york-city-new-york-1271.jpg",communityName:"Manhattan"},2:{imgUrl:"https://pbs.twimg.com/media/Drb0hVBWwAUvJSr.jpg",communityName:"Queens"},3:{imgUrl:"https://cdn-assets.alltrails.com/uploads/photo/image/19326941/extra_large_a08958fc25b15bb98cf4e1d17f1443c1.jpg",communityName:"Bronx"},4:{imgUrl:"http://s1.1zoom.net/big0/603/Australia_Rivers_Boats_Brooklyn_Hawkesbury_River_540885_1280x800.jpg",communityName:"Brooklyn"},5:{imgUrl:"https://cdn2.vox-cdn.com/uploads/chorus_asset/file/6695497/07_Kensinger_Mill_Creek_DSC_8839.0.jpg",communityName:"Staten Island"}}),Le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).click=function(e){e.preventDefault()},a.getActivities=function(){var e=a.props.activity;if(e)return e.map(function(e,t){return"joined"===e.type?r.a.createElement(g.CollectionItem,{className:"avatar",key:t+e.type},r.a.createElement("img",{src:e.avatar_img,alt:"",className:"circle"}),r.a.createElement("p",{className:"title left"},r.a.createElement("a",{href:"/profile/".concat(e.usersid),className:"communityActivity_username"},e.username)," has joined the community."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:e.time_stamp}))):"uploaded"===e.type?r.a.createElement(g.CollectionItem,{className:"avatar",key:t+e.type},r.a.createElement("img",{src:e.avatar_img,alt:"",className:"circle"}),r.a.createElement("p",{className:"title left"},r.a.createElement("a",{href:"/profile/".concat(e.usersid),className:"communityActivity_username"},e.username)," uploaded a photo to ",r.a.createElement("a",{href:"/goal/".concat(e.goal_id),className:"communityActivity_link"},e.title),"."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:e.time_stamp}))):"subscribed"===e.type?r.a.createElement(g.CollectionItem,{className:"avatar",key:t+e.type},r.a.createElement("img",{src:e.avatar_img,alt:"",className:"circle"}),r.a.createElement("p",{className:"title left"},r.a.createElement("a",{href:"/profile/".concat(e.usersid),className:"communityActivity_username"},e.username)," has subscribed to ",r.a.createElement("a",{href:"/goal/".concat(e.goal_id),className:"communityActivity_link"},e.title),"."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:e.time_stamp}))):"milestone"===e.type?r.a.createElement(g.CollectionItem,{className:"avatar",key:t+e.type},r.a.createElement("img",{src:e.avatar_img,alt:"",className:"circle"}),r.a.createElement("p",{className:"title left"},r.a.createElement("a",{href:"/profile/".concat(e.usersid)},e.name)," has completed ",r.a.createElement("a",{href:"/goal/".concat(e.goal_id),className:"communityActivity_link"},e.title)," goal."),r.a.createElement("br",null),r.a.createElement("p",{className:"left grey-text"},r.a.createElement(de.a,{date:e.time_stamp}))):r.a.createElement("p",null,"No Activities yet")})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAllCommunityActivity(this.props.match.params.id),this.props.fetchAllGoalsPerCommunity(this.props.match.params.id)}},{key:"render",value:function(){var e,t=this,a=this.props.match.params.id;return this.props.community&&(e=this.props.community.data.map(function(e,a){return r.a.createElement(g.CollectionItem,{className:"community-goal",key:"".concat(e.title," ").concat(a),onClick:function(){return t.props.history.push("/goal/".concat(e.id))}},e.title,r.a.createElement("a",{href:"/goal/".concat(e.id),className:"secondary-content"},r.a.createElement(g.Icon,null,"arrow_forward")))})),r.a.createElement("div",{className:"community_profile"},r.a.createElement(g.Row,{className:"center"},r.a.createElement(g.Col,{l:4,className:"push-l1  m10 s12 black-text z-depth-3 try"},r.a.createElement(g.Collection,{className:"avatar"},r.a.createElement("div",{className:"pic-container"},r.a.createElement("img",{src:Re[a].imgUrl,alt:"borough",className:"borough responsive-img"}),r.a.createElement("h4",null,Re[a].communityName),r.a.createElement("h5",null,"Goals")),e,r.a.createElement(g.CollectionItem,null,r.a.createElement(g.Button,{type:"submit",waves:"light"},r.a.createElement("a",{href:"/goals/community/".concat(this.props.match.params.id),className:"secondary-content"},r.a.createElement("div",{className:"white-text"},"Community Goals",r.a.createElement(g.Icon,{right:!0},"arrow_forward"))))))),r.a.createElement(g.Col,{l:5,className:"offset-l2 m10 s12 z-depth-3 community-activity"},r.a.createElement(g.Collection,{header:"Community Feed"},this.getActivities()))))}}]),t}(n.Component),Pe=Object(k.b)(function(e,t){return{activity:e.activity,community:e.goals.goalsComm}},function(e,t){return{fetchAllCommunityActivity:function(t){return e(Ue(t))},fetchAllGoalsPerCommunity:function(t){return e(x(t))}}})(Le),xe=(a(292),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(je,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:V}),r.a.createElement(p.b,{path:"/signup",component:ee}),r.a.createElement(p.b,{path:"/login",component:re}),r.a.createElement(p.b,{path:"/aboutus",component:W}),r.a.createElement(p.b,{path:"/profile/:id",component:Ee}),r.a.createElement(p.b,{path:"/goal/:goal_id",component:ke}),r.a.createElement(p.b,{path:"/community/:id",component:Pe}),r.a.createElement(p.b,{path:"/goals/community/:community_id",component:ke})))}}]),t}(n.Component)),Me=a(36),De=a(15),Te={user:{},isLoggedIn:null,userId:null,username:null,email:"",currentUser:{img_url:"https://bloximages.newyork1.vip.townnews.com/kentwired.com/content/tncms/assets/v3/editorial/f/95/f95384b0-edfc-59b2-8b1e-4a6f2c3bc61c/52c5029f44428.image.jpg"}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"NEW_USER":return Object(De.a)({},e,{user:t.user});case"LOG_IN":return Object(De.a)({},e,{userId:+J.getToken(),username:t.payload.id,isLoggedIn:J.isUserAuthenticated()});case"CURRENT_USER":return Object(De.a)({},e,{currentUser:t.payload});default:return e}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_TONNAGE":return Object(De.a)({},e,{data:t.tonnage});default:return e}},Be=function(e){var t=e.split("@$");return{description:t[0],initiative:t[1],slogan:t[2]}},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_ALLGOALS":return t.goals.data.forEach(function(e){var t=Be(e.description);e.description=t}),Object(De.a)({},e,{goals:t.goals});case"RECEIVE_SUBMISSIONS_PER_GOAL":return Object(De.a)({},e,{submissions:t.submissions});case"RECEIVE_SUBSCRIPTIONS_PER_GOAL":return t.subscriptions.forEach(function(e){var t=Be(e.description);e.description=t}),Object(De.a)({},e,{subscriptions:t.subscriptions});case"RECEIVE_ALLSUBM_COUNT_PER_COMM":return Object(De.a)({},e,{subCount:t.subCount});case"RECEIVE_ALLGOALS_PER_COMM":return Object(De.a)({},e,{goalsComm:t.goalsComm});case"RECEIVE_ALLUSERS_PER_GOAL":return Object(De.a)({},e,{goalUsers:t.goalUsers});default:return e}},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{subscripUser:[]},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_ALLSUBSCRIPTIONS":return Object(De.a)({},e,{subscriptions:t.subscriptions});case"RECEIVE_ALLSUBSCRIPTIONS_FORAUSER":return Object(De.a)({},e,t.subscriptions);case"RECEIVE_ALLSUBS_PER_COMM":return Object(De.a)({},e,{community:t.subscriptions});default:return e}},We=a(91),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_ALLUSERS":return[].concat(Object(We.a)(e),Object(We.a)(t.users));default:return e}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_ALLACTIVITY_FORACOMMUNITY":return t.activity.activity;default:return e}},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_USERACTIVITY":return t.activity;default:return e}},Ke=Object(Me.c)({auth:Ge,data:Fe,goals:ze,subscriptions:Ve,users:Ye,activity:qe,userActivity:He}),Qe=a(124),Je=a(125),Xe=a.n(Je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=Object(Me.d)(Ke,{},Object(Me.a)(Qe.a,Xe.a));s.a.render(r.a.createElement(k.a,{store:$e},r.a.createElement(ce.a,null,r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[126,1,2]]]);
//# sourceMappingURL=main.06fe3e54.chunk.js.map